(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Swap"],{1337:function(e,t,o){"use strict";o("6137")},3547:function(e,t,o){"use strict";o("8e60")},"35e3":function(e,t,o){"use strict";o.r(t);var n=o("7a23"),a=function(e){return Object(n["pushScopeId"])("data-v-f3ee6170"),e=e(),Object(n["popScopeId"])(),e},s={class:"swap-container"},i={class:"swap-content"},c={class:"swap-title"},r={class:"swap-box"},l={class:"swap-box_top"},d=["src"],u={key:1,class:"token-button readonly"},m=["src"],p={class:"switch-box"},b={class:"swap-box"},f={class:"swap-box_top"},h=["src"],k={key:1,class:"token-button readonly"},w=["src"],O={class:"slippage-box"},j={class:"label"},v={class:"value"},g=a((function(){return Object(n["createElementVNode"])("span",null,"%",-1)})),T=Object(n["createTextVNode"])("Wrong Network");function y(e,t,o,a,y,N){var V=Object(n["resolveComponent"])("van-count-down"),$=Object(n["resolveComponent"])("van-icon"),S=Object(n["resolveComponent"])("van-field"),I=Object(n["resolveComponent"])("van-loading"),E=Object(n["resolveComponent"])("van-stepper"),C=Object(n["resolveComponent"])("van-button"),B=Object(n["resolveComponent"])("van-form"),D=Object(n["resolveComponent"])("select-token"),x=Object(n["resolveComponent"])("confirm-swap"),A=Object(n["resolveComponent"])("connect-wallet");return Object(n["openBlock"])(),Object(n["createElementBlock"])("section",s,[Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("div",c,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("trade")),1),Object(n["createVNode"])(V,{class:"count-down",ref:"countDown",time:3e4,"auto-start":!1,onFinish:N.countDownEnd,format:e.$t("refreshCountDown")},null,8,["onFinish","format"]),Object(n["createVNode"])($,{name:"cross",class:"icon-close",color:"#878FBC",size:"0.4rem",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(t){return e.$f.goBack()}),["stop"]))})]),Object(n["createVNode"])(B,{ref:"form","validate-first":"",onSubmit:N.getSwapInfo},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("from")),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("balance"))+"："+Object(n["toDisplayString"])(e.$f.formatNum(e.$f.formatFixed(y.fromTokenBalance,8))),1)]),Object(n["createVNode"])(S,{modelValue:y.form.amount,"onUpdate:modelValue":t[3]||(t[3]=function(e){return y.form.amount=e}),type:"number",size:"large",name:"amount",rules:[{required:!0,message:e.$t("amountCantNotEmpty")},{validator:N.checkAmount,message:N.checkAmountMessage}],clickable:""},{"right-icon":Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",{class:"max-button",onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(e){return y.form.amount=y.fromTokenBalance}),["stop"]))},Object(n["toDisplayString"])(e.$t("max")),1)]})),button:Object(n["withCtx"])((function(){return[1===y.swapType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"token-button",onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(e){return y.selectTokenVisible=!0}),["stop"]))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{class:"icon-token",src:e.$f.formatIcon(y.fromToken),alt:""},null,8,d),[[n["vShow"],y.fromToken.symbol]]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(y.fromToken.symbol||"选择token"),1),Object(n["createVNode"])($,{name:"arrow-down"})])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",u,[Object(n["createElementVNode"])("img",{class:"icon-token",src:e.$f.formatIcon(y.fromToken),alt:""},null,8,m),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(y.fromToken.symbol),1)]))]})),_:1},8,["modelValue","rules"])]),Object(n["createElementVNode"])("div",p,[Object(n["createVNode"])($,{class:"switch-icon",name:"down",onClick:Object(n["withModifiers"])(N.switchSwapType,["stop"])},null,8,["onClick"])]),Object(n["createElementVNode"])("div",b,[Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("to")),1),Object(n["createElementVNode"])("span",null,[Object(n["withDirectives"])(Object(n["createVNode"])(I,{class:"icon-loading",size:"0.24rem",type:"spinner"},null,512),[[n["vShow"],y.loadingGetAmount]]),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.$t("balance"))+"："+Object(n["toDisplayString"])(e.$f.formatNum(e.$f.formatFixed(y.toTokenBalance,8))),1)])]),Object(n["createVNode"])(S,{modelValue:y.toTokenAmount,"onUpdate:modelValue":t[5]||(t[5]=function(e){return y.toTokenAmount=e}),type:"number",size:"large",name:"",readonly:""},{button:Object(n["withCtx"])((function(){return[2===y.swapType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"token-button",onClick:t[4]||(t[4]=Object(n["withModifiers"])((function(e){return y.selectTokenVisible=!0}),["stop"]))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{class:"icon-token",src:e.$f.formatIcon(y.toToken),alt:""},null,8,h),[[n["vShow"],y.toToken.symbol]]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(y.toToken.symbol||"选择token"),1),Object(n["createVNode"])($,{name:"arrow-down"})])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",k,[Object(n["createElementVNode"])("img",{class:"icon-token",src:e.$f.formatIcon(y.toToken),alt:""},null,8,w),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(y.toToken.symbol),1)]))]})),_:1},8,["modelValue"])]),Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("span",j,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("div",v,[Object(n["createVNode"])(E,{modelValue:y.slippage,"onUpdate:modelValue":t[6]||(t[6]=function(e){return y.slippage=e}),min:"0",step:"0.5"},null,8,["modelValue"]),g])]),""===e.$store.state.wallet?(Object(n["openBlock"])(),Object(n["createBlock"])(C,{key:0,class:"submit-button",block:"",type:"primary",onClick:t[7]||(t[7]=Object(n["withModifiers"])((function(e){return y.dialogVisible=!0}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("connectWallet")),1)]})),_:1})):""===e.$store.state.wallet||"Wrong Network"!==e.$store.getters.netName&&N.formatNetwork()?!y.isApprove&&y.fromToken.address?(Object(n["openBlock"])(),Object(n["createBlock"])(C,{key:2,class:"submit-button",block:"",type:"primary",loading:y.loading,disabled:""===e.$store.state.wallet,onClick:Object(n["withModifiers"])(N.approveCalldata,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("approve")),1)]})),_:1},8,["loading","disabled","onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])(C,{key:3,class:"submit-button",block:"",type:"primary",loading:y.loading||y.loadingGetAmount,disabled:""===e.$store.state.wallet||""===y.fromToken.address||""===y.form.amount,"native-type":"submit"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("swap")),1)]})),_:1},8,["loading","disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])(C,{key:1,class:"submit-button",block:"",disabled:"",type:"danger"},{default:Object(n["withCtx"])((function(){return[T]})),_:1}))]})),_:1},8,["onSubmit"]),Object(n["createVNode"])(D,{visible:y.selectTokenVisible,"onUpdate:visible":t[8]||(t[8]=function(e){return y.selectTokenVisible=e}),onSelect:N.selectChange},null,8,["visible","onSelect"]),Object(n["createVNode"])(x,{visible:y.dialogVisibleSwap,"onUpdate:visible":t[9]||(t[9]=function(e){return y.dialogVisibleSwap=e}),swapInfo:y.swapInfo,slippage:y.slippage,onSubmit:N.submitSwap,loading:y.loadingSwap},null,8,["visible","swapInfo","slippage","onSubmit","loading"]),Object(n["createVNode"])(A,{modelValue:y.dialogVisible,"onUpdate:modelValue":t[10]||(t[10]=function(e){return y.dialogVisible=e})},null,8,["modelValue"])])])}var N=o("1da1"),V=o("5530"),$=(o("96cf"),o("a9e3"),o("ac1f"),o("5319"),o("d3b7"),o("25f0"),o("365c")),S=o("c9d9"),I=o("6779"),E=(o("fb6a"),o("b0c0"),{class:"search-result"});function C(e,t,o,a,s,i){var c=Object(n["resolveComponent"])("van-search"),r=Object(n["resolveComponent"])("van-empty"),l=Object(n["resolveComponent"])("van-cell"),d=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{show:i.show,"onUpdate:show":t[1]||(t[1]=function(e){return i.show=e}),"cancel-text":e.$t("cancel"),description:"",teleport:"#app",onSelect:i.selectToken,"close-on-click-action":""},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{modelValue:s.query,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.query=e}),class:"search",placeholder:e.$t("searchNameOrAddress")},null,8,["modelValue","placeholder"]),Object(n["createElementVNode"])("div",E,[Object(n["withDirectives"])(Object(n["createVNode"])(r,{class:"empty",image:e.emptyNoSearchLight,description:e.$t("noSearchResults")},null,8,["image","description"]),[[n["vShow"],s.swapTokensList&&0===s.swapTokensList.length]]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.swapTokensList.slice(0,30),(function(t){var o,a;return Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:t.address,class:Object(n["normalizeClass"])(["list-item",{disabled:t.address===(null===(o=e.$store.state.tokenInfo)||void 0===o?void 0:o.address)}]),onClick:Object(n["withModifiers"])((function(e){return i.selectToken(t)}),["stop"]),title:t.symbol,icon:e.$f.formatIcon(t),value:t.name,size:"large",clickable:t.address!==(null===(a=e.$store.state.tokenInfo)||void 0===a?void 0:a.address)},null,8,["class","onClick","title","icon","value","clickable"])})),128))])]})),_:1},8,["show","cancel-text","onSelect"])}o("07ac"),o("4de4"),o("00b4"),o("4d63"),o("c607"),o("2c3e");var B={name:"SelectToken",props:{visible:Boolean},emits:["select","update:visible"],data:function(){return{query:"",swapTokensList:this.initTokensList}},computed:{show:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},initTokensList:function(){return Object.values(this.$store.state.swapTokens)}},watch:{query:function(e){this.swapTokensList=""!==e?this.initTokensList.filter((function(t){return new RegExp(e,"i").test(t.symbol)||new RegExp(e,"i").test(t.address)})):this.initTokensList},visible:function(e){e||(this.query="")},"$store.state.chainId":function(){this.init()},"$store.state.tokenInfo.network":function(){this.init()},"$store.state.currentAccount":function(){this.init()}},created:function(){this.init()},methods:{init:function(){var e=this;this.isLoading=!0,this.$store.dispatch("getSwapTokens").then((function(){var t,o;(e.swapTokensList=e.initTokensList||[],e.swapTokensList&&e.swapTokensList.length>0)&&((null===(t=e.swapTokensList[0])||void 0===t?void 0:t.address)===(null===(o=e.$store.state.tokenInfo)||void 0===o?void 0:o.address)?e.$emit("select",e.swapTokensList[1]):e.$emit("select",e.swapTokensList[0]))})).finally((function(){e.isLoading=!1}))},selectToken:function(e){var t;e.address!==(null===(t=this.$store.state.tokenInfo)||void 0===t?void 0:t.address)&&(this.$emit("select",e),this.$emit("update:visible",!1))}}},D=(o("8aab"),o("6b0d")),x=o.n(D);const A=x()(B,[["render",C],["__scopeId","data-v-9529e954"]]);var _=A,L={class:"swap-title"},U={class:"swap-info"},P={class:"swap-info_item header"},M={class:"header-li"},q={class:"header-li_left"},F=["src"],R={class:"header-li_right"},z={class:"switch-box"},G={class:"header-li"},Q={class:"header-li_left"},W=["src"],J={class:"header-li_right"},H={class:"swap-info_item"},Z={class:"swap-info_item-label"},K={class:"swap-info_item-value"},X={class:"swap-info_item"},Y={class:"swap-info_item-label"},ee={class:"swap-info_item-value"},te={class:"p-item"},oe={class:"p-item"},ne={class:"swap-info_item"},ae={class:"swap-info_item-label"},se={class:"swap-info_item-value"},ie={class:"p-item"},ce={class:"p-item"},re={class:"swap-info_item"},le={class:"swap-info_item-label"},de={class:"swap-info_item-value"},ue={class:"footer"};function me(e,t,o,a,s,i){var c=Object(n["resolveComponent"])("van-icon"),r=Object(n["resolveComponent"])("van-button"),l=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createBlock"])(l,{show:i.dialogVisible,"onUpdate:show":t[0]||(t[0]=function(e){return i.dialogVisible=e}),style:Object(n["normalizeStyle"])({width:"90%",background:"#343C63",padding:"0.4rem"}),closeable:"",round:"",teleport:"#app"},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("header",L,Object(n["toDisplayString"])(e.$t("tradeConfirm")),1),Object(n["createElementVNode"])("ul",U,[Object(n["createElementVNode"])("li",P,[Object(n["createElementVNode"])("div",M,[Object(n["createElementVNode"])("div",q,[Object(n["createElementVNode"])("img",{class:"icon-token",src:e.$f.formatIcon(o.swapInfo.fromToken),alt:"",height:"20"},null,8,F),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(o.swapInfo.fromToken.symbol),1)]),Object(n["createElementVNode"])("div",R,Object(n["toDisplayString"])(Number(i.formatUnits(o.swapInfo.fromTokenAmount,o.swapInfo.fromToken.decimals))||"0"),1)]),Object(n["createElementVNode"])("div",z,[Object(n["createVNode"])(c,{class:"switch-icon",name:"down"})]),Object(n["createElementVNode"])("div",G,[Object(n["createElementVNode"])("div",Q,[Object(n["createElementVNode"])("img",{class:"icon-token",src:e.$f.formatIcon(o.swapInfo.toToken),alt:"",height:"20"},null,8,W),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(o.swapInfo.toToken.symbol),1)]),Object(n["createElementVNode"])("div",J,Object(n["toDisplayString"])(Number(i.formatUnits(o.swapInfo.toTokenAmount,o.swapInfo.toToken.decimals))||"0"),1)])]),Object(n["createElementVNode"])("li",H,[Object(n["createElementVNode"])("div",Z,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("div",K,Object(n["toDisplayString"])(o.slippage)+"%",1)]),Object(n["createElementVNode"])("li",X,[Object(n["createElementVNode"])("div",Y,Object(n["toDisplayString"])(e.$t("feePrice")),1),Object(n["createElementVNode"])("div",ee,[Object(n["createElementVNode"])("div",te,"1 "+Object(n["toDisplayString"])(o.swapInfo.fromToken.symbol)+" = "+Object(n["toDisplayString"])(i.getPrice(o.swapInfo.fromTokenAmount,o.swapInfo.toTokenAmount))+" "+Object(n["toDisplayString"])(o.swapInfo.toToken.symbol),1),Object(n["createElementVNode"])("div",oe,"1 "+Object(n["toDisplayString"])(o.swapInfo.toToken.symbol)+" = "+Object(n["toDisplayString"])(i.getPrice(o.swapInfo.toTokenAmount,o.swapInfo.fromTokenAmount))+" "+Object(n["toDisplayString"])(o.swapInfo.fromToken.symbol),1)])]),Object(n["createElementVNode"])("li",ne,[Object(n["createElementVNode"])("div",ae,"USD "+Object(n["toDisplayString"])(e.$t("price")),1),Object(n["createElementVNode"])("div",se,[Object(n["createElementVNode"])("div",ie,"1 "+Object(n["toDisplayString"])(o.swapInfo.fromToken.symbol)+" = $"+Object(n["toDisplayString"])(i.formatPrice(o.swapInfo.fromToken.address)),1),Object(n["createElementVNode"])("div",ce,"1 "+Object(n["toDisplayString"])(o.swapInfo.toToken.symbol)+" = $"+Object(n["toDisplayString"])(i.formatPrice(o.swapInfo.toToken.address)),1)])]),Object(n["createElementVNode"])("li",re,[Object(n["createElementVNode"])("div",le,Object(n["toDisplayString"])(e.$t("estimatedGas")),1),Object(n["createElementVNode"])("div",de,"≈ $"+Object(n["toDisplayString"])(i.getEstimatedFee(o.swapInfo.tx.gas,o.swapInfo.tx.gasPrice)),1)])]),Object(n["createElementVNode"])("div",ue,[Object(n["createVNode"])(r,{class:"submit-button",type:"primary",loading:i.isLoading,block:"",onClick:Object(n["withModifiers"])(i.submitSwap,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm")),1)]})),_:1},8,["loading","onClick"])])]})),_:1},8,["show","style"])}o("b680");var pe=o("901e"),be=o.n(pe),fe={name:"ConfirmSwap",props:{visible:Boolean,swapInfo:Object,slippage:Number,loading:Boolean},emits:["update:visible","submit"],data:function(){return{}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},isLoading:function(){return this.loading}},methods:{formatUnits:I["utils"].formatUnits,formatPrice:function(e){return this.$f.formatNumber(e&&""!==e&&this.$store.state.tokensPrice[e]||0)},getPrice:function(e,t){return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":Number(new be.a(t).div(e).toFixed(7))||"0"},getEstimatedFee:function(e,t){return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":Number(new be.a(e).times(t).times(new be.a(this.formatPrice("0x0000000000000000000000000000000000000000")||"0")).div(String(Math.pow(10,18))).toFixed(2))||"0"},submitSwap:function(){this.$emit("submit",this.swapInfo)}}};o("3547");const he=x()(fe,[["render",me],["__scopeId","data-v-98697984"]]);var ke=he,we=o("b10e"),Oe={name:"Swap",components:{SelectToken:_,ConfirmSwap:ke,ConnectWallet:we["a"]},data:function(){return{dialogVisible:!1,selectTokenVisible:!1,dialogVisibleSwap:!1,swapType:Number(this.$route.query.swapType)||1,slippage:.5,form:{amount:""},loading:!1,loadingGetAmount:!1,loadingSwap:!1,fromToken:{address:""},toToken:{},fromTokenBalance:0,toTokenBalance:0,toTokenAmount:"",approveSpender:"",isApprove:!1,Timer_amout:null,toTokenInfo:{estimatedGas:0},swapInfo:{fromToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},toToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},toTokenAmount:"0",fromTokenAmount:"0",protocols:[],tx:{from:"",to:"",data:"",value:"0",gasPrice:"0",gas:0}}}},watch:{"form.amount":function(){var e=this;this.Timer_amout&&clearTimeout(this.Timer_amout),this.Timer_amout=setTimeout((function(){e.getQuoteInfo()}),500)},"$store.state.tokenInfo.address":function(){this.getBalance(),this.init(),this.form.amount=""},"$store.state.wallet":function(e){e&&this.init()}},beforeRouteEnter:function(e,t,o){o((function(t){t.swapType=Number(e.query.swapType)||1,t.init()}))},created:function(){this.init()},methods:{checkAmount:function(e){return!(0===Number(this.fromTokenBalance)||Number(this.fromTokenBalance)<e||""===this.$store.state.wallet||"0"===String(e))},checkAmountMessage:function(e){return Number(0===!this.fromTokenBalance||Number(this.fromTokenBalance)<e||""===this.$store.state.wallet)?this.$t("insufficientBalance"):"0"===String(e)?this.$t("AmountCannotBeZero"):void 0},switchSwapType:function(){var e,t,o,n;this.swapType=1===this.swapType?2:1,this.$router.replace({name:"Swap",params:{id:this.$store.state.id},query:{swapType:this.swapType}});var a=Object(V["a"])({},this.fromToken);this.fromToken=Object(V["a"])({},this.toToken),this.toToken=a;var s=this.fromTokenBalance;this.fromTokenBalance=this.toTokenBalance,this.toTokenBalance=s;var i=this.form.amount;this.form.amount=this.toTokenAmount,this.toTokenAmount=i,this.allowance(),null===(e=this.$refs)||void 0===e||null===(t=e.countDown)||void 0===t||t.reset(),null===(o=this.$refs)||void 0===o||null===(n=o.countDown)||void 0===n||n.start()},init:function(){this.getBalance(),this.getApproveSpender()},getApproveSpender:function(){var e,t,o=this,n=null!==(e=this.$store.state.tokenInfo)&&void 0!==e&&e.network?S["f"][null===(t=this.$store.state.tokenInfo)||void 0===t?void 0:t.network].chainId:56;Object($["H"])(n).then((function(e){o.approveSpender=e.address,o.allowance()}))},approveCalldata:function(){var e=this;return Object(N["a"])(regeneratorRuntime.mark((function t(){var o,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,a=null!==(o=e.$store.state.tokenInfo)&&void 0!==o&&o.network?S["f"][null===(n=e.$store.state.tokenInfo)||void 0===n?void 0:n.network].chainId:56,t.next=4,Object($["l"])({tokenAddress:e.fromToken.address},a);case 4:s=t.sent,Object($["qc"])(s).then((function(e){return e.wait()})).then((function(t){return e.allowance(),t})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loading=!1}));case 6:case"end":return t.stop()}}),t)})))()},allowance:function(){var e=this,t=this.fromToken.address;this.approveSpender&&t&&Object($["i"])(this.approveSpender,t).then((function(t){e.isApprove=t}))},getBalance:function(){var e=this;2===this.swapType?this.fromToken=this.$store.state.tokenInfo:this.toToken=this.$store.state.tokenInfo,this.fromToken.address&&Object($["I"])(this.fromToken.address).then((function(t){e.fromTokenBalance=t})),this.toToken.address&&Object($["I"])(this.toToken.address).then((function(t){e.toTokenBalance=t}))},countDownEnd:function(){this.getQuoteInfo()},selectChange:function(e){var t=this;this.form.amount="",1===this.swapType?this.fromToken=e:this.toToken=e;var o=e.address;Object($["I"])(o).then((function(e){1===t.swapType?t.fromTokenBalance=e:t.toTokenBalance=e,t.$refs.form.resetValidation()})).catch((function(e){console.log(e)})),this.allowance(),this.getQuoteInfo()},getQuoteInfo:function(){var e=this;if(this.form.amount&&0!==Number(this.form.amount)&&this.fromToken.address&&this.toToken.address){var t,o,n,a;this.loadingGetAmount=!0,null===(t=this.$refs)||void 0===t||null===(o=t.countDown)||void 0===o||o.pause();var s={fromTokenAddress:this.fromToken.address,toTokenAddress:this.toToken.address,amount:I["utils"].parseUnits(this.form.amount,this.fromToken.decimals).toString()},i=null!==(n=this.$store.state.tokenInfo)&&void 0!==n&&n.network?S["f"][null===(a=this.$store.state.tokenInfo)||void 0===a?void 0:a.network].chainId:56;Object($["ub"])(s,i).then((function(t){e.toTokenAmount=I["utils"].formatUnits(t.toTokenAmount,t.toToken.decimals),e.toTokenInfo=t})).catch((function(t){var o,n;e.toTokenAmount="",e.$notify({type:"danger",message:(null===t||void 0===t||null===(o=t.response)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.message)||e.$t("failedTransation")})})).finally((function(){var t,o,n,a;e.loadingGetAmount=!1,null===(t=e.$refs)||void 0===t||null===(o=t.countDown)||void 0===o||o.reset(),null===(n=e.$refs)||void 0===n||null===(a=n.countDown)||void 0===a||a.start()}))}else this.toTokenAmount=""},formatPrice:function(e){return this.$f.formatNumber(e&&""!==e&&this.$store.state.tokensPrice[e]||0)},formatNetwork:function(){return S["b"][this.$store.state.chainId]&&this.$store.state.tokenInfo.network===S["b"][this.$store.state.chainId].netName},getSwapInfo:function(){var e=this,t={fromTokenAddress:this.fromToken.address,toTokenAddress:this.toToken.address,amount:I["utils"].parseUnits(this.form.amount,this.fromToken.decimals).toString(),slippage:this.slippage};this.loading=!0,Object($["Ab"])(t).then((function(t){e.swapInfo=t,e.dialogVisibleSwap=!0})).catch((function(t){var o,n;console.log("error",t.response.data.message),e.$notify({type:"danger",message:(null===t||void 0===t||null===(o=t.response)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.message)||e.$t("failedTransation")})})).finally((function(){e.loading=!1}))},submitSwap:function(e){var t=this;return Object(N["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.loadingSwap=!0,o.prev=1,o.next=4,Object($["qc"])(e.tx).then((function(e){return e.wait()})).then((function(e){return t.$notify({type:"success",message:t.$t("tradeSuccess")}),t.$refs.form.resetValidation(),t.form.amount="",t.dialogVisibleSwap=!1,t.getBalance(),e})).catch((function(e){t.$f.handleError(e)})).finally((function(){t.loadingSwap=!1}));case 4:n=o.sent,console.log("swapTx",n),o.next=13;break;case 8:o.prev=8,o.t0=o["catch"](1),console.log("error",o.t0),t.$notify({type:"danger",message:t.$t("tradeFail")}),t.loadingSwap=!1;case 13:case"end":return o.stop()}}),o,null,[[1,8]])})))()}}};o("1337");const je=x()(Oe,[["render",y],["__scopeId","data-v-f3ee6170"]]);t["default"]=je},6137:function(e,t,o){},"8aab":function(e,t,o){"use strict";o("e71e")},"8e60":function(e,t,o){},e71e:function(e,t,o){}}]);